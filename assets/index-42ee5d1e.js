(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();const Dt=(e,n)=>e===n,ht=Symbol("solid-track"),Se={equals:Dt};let pt=mt;const z=1,ke=2,$t={owned:null,cleanups:null,context:null,owner:null};var E=null;let je=null,k=null,P=null,D=null,Be=0;function se(e,n){const t=k,r=E,s=e.length===0,l=s?$t:{owned:null,cleanups:null,context:null,owner:n===void 0?r:n},o=s?e:()=>e(()=>V(()=>Ie(l)));E=l,k=null;try{return oe(o,!0)}finally{k=t,E=r}}function S(e,n){n=n?Object.assign({},Se,n):Se;const t={value:e,observers:null,observerSlots:null,comparator:n.equals||void 0},r=s=>(typeof s=="function"&&(s=s(t.value)),vt(t,s));return[bt.bind(t),r]}function I(e,n,t){const r=nt(e,n,!1,z);pe(r)}function Qe(e,n,t){pt=qt;const r=nt(e,n,!1,z),s=ct&&St(E,ct.id);s&&(r.suspense=s),(!t||!t.render)&&(r.user=!0),D?D.push(r):pe(r)}function y(e,n,t){t=t?Object.assign({},Se,t):Se;const r=nt(e,n,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=t.equals||void 0,pe(r),bt.bind(r)}function Te(e){return oe(e,!1)}function V(e){if(k===null)return e();const n=k;k=null;try{return e()}finally{k=n}}function wt(e){return E===null||(E.cleanups===null?E.cleanups=[e]:E.cleanups.push(e)),e}function jt(e){const n=y(e),t=y(()=>Ye(n()));return t.toArray=()=>{const r=t();return Array.isArray(r)?r:r!=null?[r]:[]},t}let ct;function bt(){if(this.sources&&this.state)if(this.state===z)pe(this);else{const e=P;P=null,oe(()=>Ae(this),!1),P=e}if(k){const e=this.observers?this.observers.length:0;k.sources?(k.sources.push(this),k.sourceSlots.push(e)):(k.sources=[this],k.sourceSlots=[e]),this.observers?(this.observers.push(k),this.observerSlots.push(k.sources.length-1)):(this.observers=[k],this.observerSlots=[k.sources.length-1])}return this.value}function vt(e,n,t){let r=e.value;return(!e.comparator||!e.comparator(r,n))&&(e.value=n,e.observers&&e.observers.length&&oe(()=>{for(let s=0;s<e.observers.length;s+=1){const l=e.observers[s],o=je&&je.running;o&&je.disposed.has(l),(o?!l.tState:!l.state)&&(l.pure?P.push(l):D.push(l),l.observers&&_t(l)),o||(l.state=z)}if(P.length>1e6)throw P=[],new Error},!1)),n}function pe(e){if(!e.fn)return;Ie(e);const n=E,t=k,r=Be;k=E=e,Wt(e,e.value,r),k=t,E=n}function Wt(e,n,t){let r;try{r=e.fn(n)}catch(s){return e.pure&&(e.state=z,e.owned&&e.owned.forEach(Ie),e.owned=null),e.updatedAt=t+1,yt(s)}(!e.updatedAt||e.updatedAt<=t)&&(e.updatedAt!=null&&"observers"in e?vt(e,r):e.value=r,e.updatedAt=t)}function nt(e,n,t,r=z,s){const l={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:E,context:null,pure:t};return E===null||E!==$t&&(E.owned?E.owned.push(l):E.owned=[l]),l}function Ce(e){if(e.state===0)return;if(e.state===ke)return Ae(e);if(e.suspense&&V(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Be);)e.state&&n.push(e);for(let t=n.length-1;t>=0;t--)if(e=n[t],e.state===z)pe(e);else if(e.state===ke){const r=P;P=null,oe(()=>Ae(e,n[0]),!1),P=r}}function oe(e,n){if(P)return e();let t=!1;n||(P=[]),D?t=!0:D=[],Be++;try{const r=e();return Ft(t),r}catch(r){t||(D=null),P=null,yt(r)}}function Ft(e){if(P&&(mt(P),P=null),e)return;const n=D;D=null,n.length&&oe(()=>pt(n),!1)}function mt(e){for(let n=0;n<e.length;n++)Ce(e[n])}function qt(e){let n,t=0;for(n=0;n<e.length;n++){const r=e[n];r.user?e[t++]=r:Ce(r)}for(n=0;n<t;n++)Ce(e[n])}function Ae(e,n){e.state=0;for(let t=0;t<e.sources.length;t+=1){const r=e.sources[t];if(r.sources){const s=r.state;s===z?r!==n&&(!r.updatedAt||r.updatedAt<Be)&&Ce(r):s===ke&&Ae(r,n)}}}function _t(e){for(let n=0;n<e.observers.length;n+=1){const t=e.observers[n];t.state||(t.state=ke,t.pure?P.push(t):D.push(t),t.observers&&_t(t))}}function Ie(e){let n;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),r=e.sourceSlots.pop(),s=t.observers;if(s&&s.length){const l=s.pop(),o=t.observerSlots.pop();r<s.length&&(l.sourceSlots[o]=r,s[r]=l,t.observerSlots[r]=o)}}if(e.owned){for(n=e.owned.length-1;n>=0;n--)Ie(e.owned[n]);e.owned=null}if(e.cleanups){for(n=e.cleanups.length-1;n>=0;n--)e.cleanups[n]();e.cleanups=null}e.state=0,e.context=null}function yt(e){throw e}function St(e,n){return e?e.context&&e.context[n]!==void 0?e.context[n]:St(e.owner,n):void 0}function Ye(e){if(typeof e=="function"&&!e.length)return Ye(e());if(Array.isArray(e)){const n=[];for(let t=0;t<e.length;t++){const r=Ye(e[t]);Array.isArray(r)?n.push.apply(n,r):n.push(r)}return n}return e}const Je=Symbol("fallback");function xe(e){for(let n=0;n<e.length;n++)e[n]()}function zt(e,n,t={}){let r=[],s=[],l=[],o=0,i=n.length>1?[]:null;return wt(()=>xe(l)),()=>{let c=e()||[],a,u;return c[ht],V(()=>{let g=c.length,$,C,L,A,p,_,w,U,j;if(g===0)o!==0&&(xe(l),l=[],r=[],s=[],o=0,i&&(i=[])),t.fallback&&(r=[Je],s[0]=se(Ue=>(l[0]=Ue,t.fallback())),o=1);else if(o===0){for(s=new Array(g),u=0;u<g;u++)r[u]=c[u],s[u]=se(d);o=g}else{for(L=new Array(g),A=new Array(g),i&&(p=new Array(g)),_=0,w=Math.min(o,g);_<w&&r[_]===c[_];_++);for(w=o-1,U=g-1;w>=_&&U>=_&&r[w]===c[U];w--,U--)L[U]=s[w],A[U]=l[w],i&&(p[U]=i[w]);for($=new Map,C=new Array(U+1),u=U;u>=_;u--)j=c[u],a=$.get(j),C[u]=a===void 0?-1:a,$.set(j,u);for(a=_;a<=w;a++)j=r[a],u=$.get(j),u!==void 0&&u!==-1?(L[u]=s[a],A[u]=l[a],i&&(p[u]=i[a]),u=C[u],$.set(j,u)):l[a]();for(u=_;u<g;u++)u in L?(s[u]=L[u],l[u]=A[u],i&&(i[u]=p[u],i[u](u))):s[u]=se(d);s=s.slice(0,o=g),r=c.slice(0)}return s});function d(g){if(l[u]=g,i){const[$,C]=S(u);return i[u]=C,n(c[u],$)}return n(c[u])}}}function Xt(e,n,t={}){let r=[],s=[],l=[],o=[],i=0,c;return wt(()=>xe(l)),()=>{const a=e()||[];return a[ht],V(()=>{if(a.length===0)return i!==0&&(xe(l),l=[],r=[],s=[],i=0,o=[]),t.fallback&&(r=[Je],s[0]=se(d=>(l[0]=d,t.fallback())),i=1),s;for(r[0]===Je&&(l[0](),l=[],r=[],s=[],i=0),c=0;c<a.length;c++)c<r.length&&r[c]!==a[c]?o[c](()=>a[c]):c>=r.length&&(s[c]=se(u));for(;c<r.length;c++)l[c]();return i=o.length=l.length=a.length,r=a.slice(0),s=s.slice(0,i)});function u(d){l[c]=d;const[g,$]=S(a[c]);return o[c]=$,n(g,c)}}}function h(e,n){return V(()=>e(n||{}))}const kt=e=>`Stale read from <${e}>.`;function T(e){const n="fallback"in e&&{fallback:()=>e.fallback};return y(zt(()=>e.each,e.children,n||void 0))}function Qt(e){const n="fallback"in e&&{fallback:()=>e.fallback};return y(Xt(()=>e.each,e.children,n||void 0))}function Ct(e){const n=e.keyed,t=y(()=>e.when,void 0,{equals:(r,s)=>n?r===s:!r==!s});return y(()=>{const r=t();if(r){const s=e.children;return typeof s=="function"&&s.length>0?V(()=>s(n?r:()=>{if(!V(t))throw kt("Show");return e.when})):s}return e.fallback},void 0,void 0)}function Yt(e){let n=!1;const t=(l,o)=>l[0]===o[0]&&(n?l[1]===o[1]:!l[1]==!o[1])&&l[2]===o[2],r=jt(()=>e.children),s=y(()=>{let l=r();Array.isArray(l)||(l=[l]);for(let o=0;o<l.length;o++){const i=l[o].when;if(i)return n=!!l[o].keyed,[o,i,l[o]]}return[-1]},void 0,{equals:t});return y(()=>{const[l,o,i]=s();if(l<0)return e.fallback;const c=i.children;return typeof c=="function"&&c.length>0?V(()=>c(n?o:()=>{if(V(s)[0]!==l)throw kt("Match");return i.when})):c},void 0,void 0)}function We(e){return e}function Jt(e,n,t){let r=t.length,s=n.length,l=r,o=0,i=0,c=n[s-1].nextSibling,a=null;for(;o<s||i<l;){if(n[o]===t[i]){o++,i++;continue}for(;n[s-1]===t[l-1];)s--,l--;if(s===o){const u=l<r?i?t[i-1].nextSibling:t[l-i]:c;for(;i<l;)e.insertBefore(t[i++],u)}else if(l===i)for(;o<s;)(!a||!a.has(n[o]))&&n[o].remove(),o++;else if(n[o]===t[l-1]&&t[i]===n[s-1]){const u=n[--s].nextSibling;e.insertBefore(t[i++],n[o++].nextSibling),e.insertBefore(t[--l],u),n[s]=t[l]}else{if(!a){a=new Map;let d=i;for(;d<l;)a.set(t[d],d++)}const u=a.get(n[o]);if(u!=null)if(i<u&&u<l){let d=o,g=1,$;for(;++d<s&&d<l&&!(($=a.get(n[d]))==null||$!==u+g);)g++;if(g>u-i){const C=n[o];for(;i<u;)e.insertBefore(t[i++],C)}else e.replaceChild(t[i++],n[o++])}else o++;else n[o++].remove()}}}const at="_$DX_DELEGATE";function Zt(e,n,t,r={}){let s;return se(l=>{s=l,n===document?e():f(n,e(),n.firstChild?null:void 0,t)},r.owner),()=>{s(),n.textContent=""}}function m(e,n,t){let r;const s=()=>{const o=document.createElement("template");return o.innerHTML=e,t?o.content.firstChild.firstChild:o.content.firstChild},l=n?()=>V(()=>document.importNode(r||(r=s()),!0)):()=>(r||(r=s())).cloneNode(!0);return l.cloneNode=l,l}function $e(e,n=window.document){const t=n[at]||(n[at]=new Set);for(let r=0,s=e.length;r<s;r++){const l=e[r];t.has(l)||(t.add(l),n.addEventListener(l,en))}}function ce(e,n,t){t==null?e.removeAttribute(n):e.setAttribute(n,t)}function ae(e,n){n==null?e.removeAttribute("class"):e.className=n}function ft(e,n,t,r){if(r)Array.isArray(t)?(e[`$$${n}`]=t[0],e[`$$${n}Data`]=t[1]):e[`$$${n}`]=t;else if(Array.isArray(t)){const s=t[0];e.addEventListener(n,t[0]=l=>s.call(e,t[1],l))}else e.addEventListener(n,t)}function f(e,n,t,r){if(t!==void 0&&!r&&(r=[]),typeof n!="function")return Ee(e,n,r,t);I(s=>Ee(e,n(),s,t),r)}function en(e){const n=`$$${e.type}`;let t=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==t&&Object.defineProperty(e,"target",{configurable:!0,value:t}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}});t;){const r=t[n];if(r&&!t.disabled){const s=t[`${n}Data`];if(s!==void 0?r.call(t,s,e):r.call(t,e),e.cancelBubble)return}t=t._$host||t.parentNode||t.host}}function Ee(e,n,t,r,s){for(;typeof t=="function";)t=t();if(n===t)return t;const l=typeof n,o=r!==void 0;if(e=o&&t[0]&&t[0].parentNode||e,l==="string"||l==="number")if(l==="number"&&(n=n.toString()),o){let i=t[0];i&&i.nodeType===3?i.data=n:i=document.createTextNode(n),t=ne(e,t,r,i)}else t!==""&&typeof t=="string"?t=e.firstChild.data=n:t=e.textContent=n;else if(n==null||l==="boolean")t=ne(e,t,r);else{if(l==="function")return I(()=>{let i=n();for(;typeof i=="function";)i=i();t=Ee(e,i,t,r)}),()=>t;if(Array.isArray(n)){const i=[],c=t&&Array.isArray(t);if(Ze(i,n,t,s))return I(()=>t=Ee(e,i,t,r,!0)),()=>t;if(i.length===0){if(t=ne(e,t,r),o)return t}else c?t.length===0?dt(e,i,r):Jt(e,t,i):(t&&ne(e),dt(e,i));t=i}else if(n.nodeType){if(Array.isArray(t)){if(o)return t=ne(e,t,r,n);ne(e,t,null,n)}else t==null||t===""||!e.firstChild?e.appendChild(n):e.replaceChild(n,e.firstChild);t=n}else console.warn("Unrecognized value. Skipped inserting",n)}return t}function Ze(e,n,t,r){let s=!1;for(let l=0,o=n.length;l<o;l++){let i=n[l],c=t&&t[l],a;if(!(i==null||i===!0||i===!1))if((a=typeof i)=="object"&&i.nodeType)e.push(i);else if(Array.isArray(i))s=Ze(e,i,c)||s;else if(a==="function")if(r){for(;typeof i=="function";)i=i();s=Ze(e,Array.isArray(i)?i:[i],Array.isArray(c)?c:[c])||s}else e.push(i),s=!0;else{const u=String(i);c&&c.nodeType===3&&c.data===u?e.push(c):e.push(document.createTextNode(u))}}return s}function dt(e,n,t=null){for(let r=0,s=n.length;r<s;r++)e.insertBefore(n[r],t)}function ne(e,n,t,r){if(t===void 0)return e.textContent="";const s=r||document.createTextNode("");if(n.length){let l=!1;for(let o=n.length-1;o>=0;o--){const i=n[o];if(s!==i){const c=i.parentNode===e;!l&&!o?c?e.replaceChild(s,i):e.insertBefore(s,t):c&&i.remove()}else l=!0}}else e.insertBefore(s,t);return[s]}const Fe=new Map,qe=new Map;function H(e,n=!1){return Fe.get(e+n)===void 0&&Fe.set(e+n,new Map([["name",e],["inverted",n]])),Fe.get(e+n)}function K(e){return H(e.get("name"),!e.get("inverted"))}function ze(e){return e.get("name")+(e.get("inverted")?"!":"")}function G(...e){let n="";return[...e].sort((r,s)=>{const l=ze(r),o=ze(s);return l<o?-1:l>o?1:0}).forEach(r=>n+=ze(r)+" "),qe.get(n)===void 0&&qe.set(n,new Set(e)),qe.get(n)}function B(...e){return new Set(e)}function tn(e,n){return e.get("name")===n.get("name")&&e.get("inverted")!==n.get("inverted")}function et(e,n){return new Set([...e,...n])}function le(e,n){const t=[];for(const r of e)n.has(r)||t.push(r);return new Set(t)}function rt(e,n){for(const t of e)if(!n.has(t))return!1;return!0}function At(e,n){if(e.size!==1)return null;const t=e.values().next().value;for(let r of n.values())if(tn(t,r))return r;return null}function Ge(e,n){function t(r){const s=B(),l=B();let o=!1,i;const c=xt(Et(r));for(const a of c)if(a.size===1){for(const u of c)if(a!==u){if(rt(a,u))l.add(u);else if(i=At(a,u)){const d=[];for(const $ of le(u,G(i)))d.push($);const g=G(...d);if(g.size===0)return!0;s.add(g),l.add(u),o=!0}}}return o===!0?t(le(et(c,s),l)):!1}return t(et(e,B(G(K(n)))))}function xt(e){const n=new Map;for(const r of e)for(const s of r)n.get(s)===void 0&&n.set(s,[]),n.get(s).push(r);const t=[];for(const r of n.values()){if(r.length!==1)continue;const s=r[0].values().next().value;n.get(K(s))||t.push(r[0])}return le(e,B(...t))}function Et(e){const n=B();for(const t of e)for(const r of e)t!==r&&rt(t,r)&&n.add(r);return le(e,n)}function nn(e){function n(t){const r=B(),s=B();let l=!1,o;const i=xt(Et(t));for(const c of i)if(c.size===1){for(const a of i)if(c!==a){if(rt(c,a))s.add(a);else if(o=At(c,a)){const u=[];for(const g of le(a,G(o)))u.push(g);const d=G(...u);if(d.size===0)return!1;r.add(d),s.add(a),l=!0}}}return l===!0?n(le(et(i,r),s)):!0}return n(e)}const fe=["Mustard","Plum","Scarlet","White","Green","Peacock"],Ne=["Ballroom","Kitchen","Library","Hall","Lounge","Conservatory","Dining Room","Billiard Room","Study"],Pe=["Knife","Revolver","Wrench","Rope","Candlestick","Pipe"],de=fe.map(e=>H(e)),ge=Ne.map(e=>H(e)),he=Pe.map(e=>H(e)),ie=de.concat(ge).concat(he),X=B(G(...de),G(...ge),G(...he));for(const e of de)for(const n of de)e!==n&&X.add(G(K(e),K(n)));for(const e of ge)for(const n of ge)e!==n&&X.add(G(K(e),K(n)));for(const e of he)for(const n of he)e!==n&&X.add(G(K(e),K(n)));var me=(e=>(e[e.NotSolution=-1]="NotSolution",e[e.Unknown=0]="Unknown",e[e.Solution=1]="Solution",e))(me||{});let R=[new Set(X),B(),B(),B()];const[M,rn]=S(3,{equals:!1}),[Q,Gt]=S(new Map([["Player 1",1],["Player 2",2],["Player 3",3]])),[tt,sn]=S(new Map([[1,6],[2,6],[3,6]])),[ln,we]=S(!0),[Nt,on]=S([new Set,new Set,new Set,new Set]),[un,cn]=S([new Set,new Set,new Set,new Set]),[an,fn]=S([new Set,new Set,new Set,new Set]);var _e=(e=>(e[e.IC=0]="IC",e[e.GR=1]="GR",e[e.GNR=2]="GNR",e))(_e||{});const[q,J]=S([]),[Re,Z]=S([]),[Le,ee]=S([]);Qe(()=>{const e=M();we(!0),Gt(new Map([...Array(e).keys()].map(t=>[`Player ${t+1}`,t+1]))),R=[new Set(X)];const n=new Map;for(let t=0;t<e;++t)R.push(B()),n.set(t+1,Math.floor(18/e));for(let t=0;t<18%e;++t)n.set(t+1,n.get(t+1)+1);sn(n),J([]),Z([]),ee([]),te()});function Ke(e,n,t=!0){Y(W(e),n),t&&(te(),Z(s=>{const l=[...s];return l.push([...q()]),l}),ee([]));const r={type:0,args:{player:W(e),card:n}};J(s=>{const l=[...s];return l.push(r),l})}function Me(e,n,t,r,s,l=void 0,o=!0){const i=W(e),c=W(n);for(const u of Pt(i,c))F(u,t),F(u,r),F(u,s);l!==void 0?Y(c,l):Y(c,t,r,s),o&&(te(),Z(u=>{const d=[...u];return d.push([...q()]),d}),ee([]));const a={type:1,args:{guesser:W(e),refuter:W(n),person:t,room:r,weapon:s,card:l}};J(u=>{const d=[...u];return d.push(a),d})}function He(e,n,t,r,s=!0){const l=W(e);for(const i of Pt(l))F(i,n),F(i,t),F(i,r);Y(l,n,t,r),Y(0,n,t,r),s&&(te(),Z(i=>{const c=[...i];return c.push([...q()]),c}),ee([]));const o={type:2,args:{guesser:W(e),person:n,room:t,weapon:r}};J(i=>{const c=[...i];return c.push(o),c})}function dn(e){const n=q();Z(t=>{const r=[...t];return r.push([...q()]),r}),ee([]),Te(()=>{R=[new Set(X)];for(let t=0;t<M();++t)R.push(B());we(!0),J([]),n.splice(e,1);for(const t of n)switch(t.type){case 0:Ke(N(t.args.player),t.args.card,!1);break;case 1:Me(N(t.args.guesser),N(t.args.refuter),t.args.person,t.args.room,t.args.weapon,t.args.card,!1);break;case 2:He(N(t.args.guesser),t.args.person,t.args.room,t.args.weapon,!1);break}te()})}function gn(){if(Re().length===0)return;ee(t=>{const r=[...t];return r.push([...q()]),r});const e=[...Re()],n=e.pop();Z(e),Te(()=>{R=[new Set(X)];for(let t=0;t<M();++t)R.push(B());we(!0),J([]);for(const t of n)switch(t.type){case 0:Ke(N(t.args.player),t.args.card,!1);break;case 1:Me(N(t.args.guesser),N(t.args.refuter),t.args.person,t.args.room,t.args.weapon,t.args.card,!1);break;case 2:He(N(t.args.guesser),t.args.person,t.args.room,t.args.weapon,!1);break}te()})}function hn(){if(Le().length===0)return;const n=[...Le()].pop();ee(t=>{const r=[...t];return r.pop(),r}),Z(t=>{const r=[...t];return r.push([...q()]),r}),Te(()=>{R=[new Set(X)];for(let t=0;t<M();++t)R.push(B());we(!0),J([]);for(const t of n)switch(t.type){case 0:Ke(N(t.args.player),t.args.card,!1);break;case 1:Me(N(t.args.guesser),N(t.args.refuter),t.args.person,t.args.room,t.args.weapon,t.args.card,!1);break;case 2:He(N(t.args.guesser),t.args.person,t.args.room,t.args.weapon,!1);break}te()})}function W(e){return Q().get(e)}function N(e){for(const[n,t]of Q().entries())if(e===t)return n;return""}function*Pt(e,n=void 0){n=n!==void 0?n:e;let t=e%M()+1;for(;t!=n;)yield t,t=t%M()+1}function Y(e,...n){R[e].add(G(...n));for(let t=0;t<M()+1;++t)t!==e&&F(t,...n)}function F(e,...n){const t=n.map(r=>K(r));R[e].add(G(...t))}function te(){let e;do e=!1,pn(),e||=$n(),e||=wn();while(e);let n=!0;for(let l=0;l<M();++l)n&&=nn(R[l]);if(we(n),!n)return;const t=[],r=[],s=[];for(let l=0;l<M()+1;++l)t.push(new Set),r.push(new Set),s.push(new Set);for(const[l,o]of R.entries())for(const i of ie)Ge(o,i)?t[l].add(i):Ge(o,K(i))?s[l].add(i):r[l].add(i);Te(()=>{on(t),cn(r),fn(s)})}function pn(){const e=[];for(let t=0;t<M()+1;++t)e.push(new Set);let n=!0;for(;n;){n=!1;for(const[t,r]of R.entries())for(const s of ie)!e[t].has(s)&&Ge(r,s)&&(n=!0,e[t].add(s));for(const[t,r]of e.entries())for(const s of r)Y(t,s)}}function $n(){let e=!1;for(const[n,t]of R.entries()){if(n===0)continue;const r=new Set;for(const s of t)s.size===1&&!s.values().next().value.get("inverted")&&r.add(s);if(r.size===tt().get(n))for(const s of ie)r.has(G(s))||t.has(G(K(s)))||(e=!0,F(n,s))}return e}function wn(){let e=!1;const n=new Map;for(const r of ie)n.set(r,new Set);for(const[r,s]of R.entries())for(const l of ie)(s.has(G(K(l)))||Ge(s,K(l)))&&n.get(l).add(r);const t=new Set([...Array(M()+1).keys()]);for(const[r,s]of n){const l=new Set([...t].filter(o=>!s.has(o)));if(l.size===1){const o=l.values().next().value;R[o].has(G(r))||(e=!0,Y(o,r))}}return e}function O(){return Array.from(Q().keys()).sort((n,t)=>Q().get(n)<Q().get(t)?-1:1)}const bn=m("<span>Initial Game Setup"),vn=m('<div id="gameSetup"><div id="playerCountContainer"><span><label for="numPlayers" title="Select number of players">#Players</label><select id="numPlayers"></select></span><div><button title="Start a New Game" id="NewGameBtn">New Game</button></div></div><div id="playerGrid"><span class="gridHeader" title="Assign players in the order that they are playing the game">Order</span><span class="gridHeader" title="Rename players">Name</span><span class="gridHeader" title="Number of cards in each players hand">#Cards'),mn=m("<option>"),_n=m("<label>"),yn=m('<input type="text">'),Sn=m("<span>");function kn(e){const n=[3,4,5,6],t=new Map([[1,"1st:"],[2,"2nd:"],[3,"3rd:"],[4,"4th:"],[5,"5th:"],[6,"6th:"]]);let r=M().toString();function s(i){r=i.target.value}function l(){rn(parseInt(r))}function o(i){Q().get(i.target.value)||Gt(c=>{let a="",u=0;for(const[g,$]of c.entries())if($===parseInt(i.target.id.slice(-1))){a=g,u=$;break}const d=new Map(c);return d.set(i.target.value,u),d.delete(a),d})}return[bn(),(()=>{const i=vn(),c=i.firstChild,a=c.firstChild,u=a.firstChild,d=u.nextSibling,g=a.nextSibling,$=g.firstChild,C=c.nextSibling;return C.firstChild.nextSibling.nextSibling,d.addEventListener("change",s),f(d,h(T,{each:n,children:p=>(()=>{const _=mn();return _.value=p,f(_,p),I(()=>_.selected=M()===p),_})()})),$.$$click=l,f(C,h(Qt,{get each(){return O()},children:(p,_)=>[(()=>{const w=_n();return ce(w,"for",`Player${_+1}`),f(w,()=>t.get(_+1)),I(()=>ce(w,"title",`Player going ${t.get(_+1)?.slice(0,-1)}`)),w})(),(()=>{const w=yn();return w.$$focusout=o,ce(w,"id",`Player${_+1}`),I(()=>w.value=p()),w})(),(()=>{const w=Sn();return f(w,()=>tt().get(_+1)),I(()=>ce(w,"title",`${p()} Should Have ${tt().get(_+1)} Cards`)),w})()]}),null),i})()]}$e(["click","focusout"]);const Cn=m("<span>Add Your Cards"),An=m('<div id="AddCard"><label for="player" title="The player holding card">player</label><select id="player"></select><label for="card" title="The card being held">card</label><select id="card"><optgroup label="People"></optgroup><optgroup label="Rooms"></optgroup><optgroup label="Weapons"></optgroup></select><button title="Add Card to Knowledgebase">Add Card ➕'),ve=m("<option>");function xn(e){let t=O()[0],r=fe[0];function s(i){t=i.target.value}function l(i){r=i.target.value}function o(){Ke(t,H(r))}return[Cn(),(()=>{const i=An(),c=i.firstChild,a=c.nextSibling,u=a.nextSibling,d=u.nextSibling,g=d.firstChild,$=g.nextSibling,C=$.nextSibling,L=d.nextSibling;return a.addEventListener("change",s),f(a,h(T,{get each(){return O()},children:A=>(()=>{const p=ve();return p.value=A,f(p,A),p})()})),d.addEventListener("change",l),f(g,h(T,{get each(){return Array.from(fe)},children:A=>(()=>{const p=ve();return p.value=A,f(p,A),p})()})),f($,h(T,{get each(){return Array.from(Ne)},children:A=>(()=>{const p=ve();return p.value=A,f(p,A),p})()})),f(C,h(T,{get each(){return Array.from(Pe)},children:A=>(()=>{const p=ve();return p.value=A,f(p,A),p})()})),L.$$click=o,i})()]}$e(["click"]);const En=m("<span>Add A Guess"),Gn=m('<div id="AddGuess"><div id="AddGuessContainer"><div id="GuesserContainer"><label for="guesser" title="The player making the guess">Guesser</label><select id="guesser"></select><label for="person" title="The person guessed">Person</label><select id="person"></select><label for="room" title="The room guessed">Room</label><select id="room"></select><label for="weapon" title="The weapon guessed">Weapon</label><select id="weapon"></select></div><div id="RefuterContainer"><label title="Was the Guess Refuted?" for="cardShownToggle">Refuted</label><span id="toggleContainer"><input id="cardShownToggle" type="checkbox" checked><label id="cblabel" for="cardShownToggle" title="Was the Guess Refuted by Another Player"></label></span><label for="refuter" title="The player refuting the guess">Refuter</label><select id="refuter"></select><label for="card" title="The card used to refute">Card</label><select id="card"></select></div></div><button title="Add Guess to Knowledgebase">Add Guess ➕'),re=m("<option>");function Nn(e){const n="Unknown",[t,r]=S(fe[0]),[s,l]=S(Ne[0]),[o,i]=S(Pe[0]),[c,a]=S(!0),[u,d]=S(O()[0]),[g,$]=S(O()[0]),[C,L]=S(n);Qe(()=>{$(O().filter(x=>x!==u())[0])}),Qe(()=>{t(),s(),o(),L(n)});function A(x){r(x.target.value)}function p(x){l(x.target.value)}function _(x){i(x.target.value)}function w(x){d(x.target.value)}function U(x){$(x.target.value)}function j(x){L(x.target.value)}function Ue(x){L(n),a(x.target.checked)}function Rt(){c()?Me(u(),g(),H(t()),H(s()),H(o()),C()===n?void 0:H(C())):He(u(),H(t()),H(s()),H(o()))}return[En(),(()=>{const x=Gn(),st=x.firstChild,lt=st.firstChild,Lt=lt.firstChild,Ve=Lt.nextSibling,Bt=Ve.nextSibling,Oe=Bt.nextSibling,Tt=Oe.nextSibling,De=Tt.nextSibling,It=De.nextSibling,it=It.nextSibling,Kt=lt.nextSibling,Mt=Kt.firstChild,ot=Mt.nextSibling,Ht=ot.firstChild,Ut=ot.nextSibling,ue=Ut.nextSibling,Vt=ue.nextSibling,be=Vt.nextSibling,Ot=st.nextSibling;return Ve.addEventListener("change",w),f(Ve,h(T,{get each(){return O()},children:v=>(()=>{const b=re();return b.value=v,f(b,v),b})()})),Oe.addEventListener("change",A),f(Oe,h(T,{get each(){return Array.from(fe)},children:v=>(()=>{const b=re();return b.value=v,f(b,v),b})()})),De.addEventListener("change",p),f(De,h(T,{get each(){return Array.from(Ne)},children:v=>(()=>{const b=re();return b.value=v,f(b,v),b})()})),it.addEventListener("change",_),f(it,h(T,{get each(){return Array.from(Pe)},children:v=>(()=>{const b=re();return b.value=v,f(b,v),b})()})),Ht.addEventListener("change",Ue),ue.addEventListener("change",U),f(ue,h(T,{get each(){return O().filter(v=>v!==u())},children:v=>(()=>{const b=re();return b.value=v,f(b,v),b})()})),be.addEventListener("change",j),f(be,h(T,{get each(){return[n,t(),s(),o()]},children:v=>(()=>{const b=re();return b.value=v,f(b,v),b})()})),Ot.$$click=Rt,I(v=>{const b=!c(),ut=!c();return b!==v._v$&&(ue.disabled=v._v$=b),ut!==v._v$2&&(be.disabled=v._v$2=ut),v},{_v$:void 0,_v$2:void 0}),I(()=>ue.value=g()),I(()=>be.value=C()),x})()]}$e(["click"]);const Pn=m('<div id="KnowledgeAdder"><div id="KnowledgeSelection"><button id="setupBtn" title="Open Game Setup Interface">Game Setup</button><button id="CardBtn" title="Open Add Card Interface">Add Cards</button><button id="GuessBtn" title="Open Add Guess Interface">Add Guess');function Rn(e){let n=function(i){return i[i.setup=0]="setup",i[i.card=1]="card",i[i.guess=2]="guess",i}({});const[t,r]=S(n.setup);function s(){r(n.setup)}function l(){r(n.card)}function o(){r(n.guess)}return(()=>{const i=Pn(),c=i.firstChild,a=c.firstChild,u=a.nextSibling,d=u.nextSibling;return a.$$click=s,u.$$click=l,d.$$click=o,f(i,h(Yt,{get children(){return[h(We,{get when(){return t()===n.setup},get children(){return h(kn,{})}}),h(We,{get when(){return t()===n.card},get children(){return h(xn,{})}}),h(We,{get when(){return t()===n.guess},get children(){return h(Nn,{})}})]}}),null),I(g=>{const $=t()===n.setup?"selected":"",C=t()===n.card?"selected":"",L=t()===n.guess?"selected":"";return $!==g._v$&&ae(a,g._v$=$),C!==g._v$2&&ae(u,g._v$2=C),L!==g._v$3&&ae(d,g._v$3=L),g},{_v$:void 0,_v$2:void 0,_v$3:void 0}),i})()}$e(["click"]);const Ln=m('<div class="Card">'),Bn=m('<div class="CardGroup">'),Tn=m('<div class="CardRank"><span></span><div class="RankContainer">'),In=m('<div id="HandViewContainer"><span>Not Solution</span><div id="HandView">'),Kn=m('<div class="HandContainer"><span>'),Mn=m('<div id="Cards"><div id="NotSolAnchor"><div id="HVTContainer"><label title="Hand View" for="hvToggle">Hand View</label><span id="hvtoggleContainer"><input id="hvToggle" type="checkbox" checked><label id="hvlabel" for="hvToggle" title="Hand View">'),Hn=m('<div id="Inconsistent">The Knowledge Base is Inconsistent');function Un(e){return(()=>{const n=Ln();return f(n,()=>e.card.get("name")),n})()}function ye(e){return(()=>{const n=Bn();return f(n,h(T,{get each(){return Array.from(e.status)},children:t=>h(Ct,{get when(){return e.population.includes(t)},get children(){return h(Un,{card:t})}})})),n})()}function Xe(e){const n=e.rank===1?"Solution":e.rank===0?"Possible Solution":"Not Solution",t=e.rank===1?Nt:e.rank===0?un:an;return(()=>{const r=Tn(),s=r.firstChild,l=s.nextSibling;return f(s,n),f(l,h(ye,{get status(){return t()[0]},get population(){return de}}),null),f(l,h(ye,{get status(){return t()[0]},get population(){return ge}}),null),f(l,h(ye,{get status(){return t()[0]},get population(){return he}}),null),I(()=>ce(r,"id","i"+e.rank)),r})()}function Vn(e){return(()=>{const n=In(),t=n.firstChild,r=t.nextSibling;return f(r,h(T,{get each(){return Array.from(O())},children:s=>(()=>{const l=Kn(),o=l.firstChild;return f(o,`${s}'s Hand`),f(l,h(ye,{get status(){return Nt()[Q().get(s)]},get population(){return ie}}),null),l})()})),n})()}function On(e){const[n,t]=S(!0);function r(s){t(s.target.checked)}return(()=>{const s=Mn(),l=s.firstChild,o=l.firstChild,i=o.firstChild,c=i.nextSibling,a=c.firstChild;return f(s,(()=>{const u=y(()=>!ln());return()=>u()?Hn():""})(),l),f(s,h(Xe,{get rank(){return me.Solution}}),l),f(s,h(Xe,{get rank(){return me.Unknown}}),l),f(l,h(Ct,{get when(){return n()},get fallback(){return h(Xe,{get rank(){return me.NotSolution}})},get children(){return h(Vn,{})}}),o),a.addEventListener("change",r),s})()}const gt=m("<br>"),Dn=m('<div class="KnowledgeView"><button class="RemoveKnowledge" title="Remove From Knowledgebase">X'),jn=m('<div id="KnowledgeViewer"><div id="KnowledgeViewHeader"><button title="Undo">←</button><button title="Redo">→</button><span>Game Knowledge</span></div><div id="KnowledgeContainer">');function Wn(){const e=[];for(const n of q())switch(n.type){case _e.IC:e.push([y(()=>N(n.args.player))," has ",y(()=>n.args.card.get("name"))]);break;case _e.GR:e.push([y(()=>N(n.args.guesser))," Guessed ",y(()=>n.args.person.get("name")),"-",y(()=>n.args.room.get("name")),"-",y(()=>n.args.weapon.get("name")),gt(),y(()=>N(n.args.refuter))," Refuted ",y((()=>{const t=y(()=>n.args.card!==void 0);return()=>t()?" with "+n.args.card.get("name"):""})())]);break;case _e.GNR:e.push([y(()=>N(n.args.guesser))," Guessed ",y(()=>n.args.person.get("name")),"-",y(()=>n.args.room.get("name")),"-",y(()=>n.args.weapon.get("name")),gt(),"No Refutation"]);break}return e}function Fn(e){function n(){dn(e.idx)}return(()=>{const t=Dn(),r=t.firstChild;return f(t,()=>e.knowledge,r),r.$$click=n,t})()}function qn(e){return(()=>{const n=jn(),t=n.firstChild,r=t.firstChild,s=r.nextSibling,l=t.nextSibling;return ft(r,"click",gn,!0),ft(s,"click",hn,!0),f(l,h(T,{get each(){return Array.from(Wn().entries())},children:([o,i])=>h(Fn,{idx:o,knowledge:i})})),I(o=>{const i=Re().length>0?"enabled":"disabled",c=!(Re().length>0),a=Le().length>0?"enabled":"disabled",u=!(Le().length>0);return i!==o._v$&&ae(r,o._v$=i),c!==o._v$2&&(r.disabled=o._v$2=c),a!==o._v$3&&ae(s,o._v$3=a),u!==o._v$4&&(s.disabled=o._v$4=u),o},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),n})()}$e(["click"]);const zn=m('<div id="banner"><div>Clue Solver'),Xn=m('<div id="main">'),Qn=()=>[zn(),(()=>{const e=Xn();return f(e,h(Rn,{}),null),f(e,h(On,{}),null),f(e,h(qn,{}),null),e})()],Yn=document.getElementById("root");Zt(()=>h(Qn,{}),Yn);
